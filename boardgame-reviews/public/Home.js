(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{AQJX:function(e,t,r){(e.exports=r("I1BE")(!1)).push([e.i,'\n.hero-body[data-v-31606b48] {\n  background: url("https://boardgame-reviews.s3-ap-northeast-1.amazonaws.com/images/background.jpg")\n    center bottom / cover;\n}\n.title[data-v-31606b48] {\n  color: whitesmoke;\n}\n',""])},K2nW:function(e,t,r){var s=r("v7HU");"string"==typeof s&&(s=[[e.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(s,o);s.locals&&(e.exports=s.locals)},KocH:function(e,t,r){"use strict";var s=r("oM3F");r.n(s).a},gcjV:function(e,t,r){"use strict";r.r(t);var s=r("o0o1"),o=r.n(s),n=r("DxOX");function a(e,t,r,s,o,n,a){try{var i=e[n](a),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(s,o)}function i(e){return function(){var t=this,r=arguments;return new Promise((function(s,o){var n=e.apply(t,r);function i(e){a(n,s,o,i,l,"next",e)}function l(e){a(n,s,o,i,l,"throw",e)}i(void 0)}))}}var l,u,m={name:"shopForm",components:{bdTextField:r("mwd/").a},data:function(){return{preview:null,errors:null,wards:[],shop_form:{photo:null,shopname:null,address:null,boardgame_num:null,content:null,home_url:null},register_form:{photo:null,name:"",address:"",wards:"",byo:!1,boardgame_num:"",home_url:"",price:"",content:""},rules:{name:[{required:!0,message:"店舗名を入力してください",trigger:"blur"},{min:1,max:32,message:"32文字以内で入力してください",trigger:"blur"}],address:[{required:!0,message:"住所を入力してください",trigger:"blur"}],wards:[{required:!0,message:"23区を入力してください",trigger:"blur"}],boardgame_num:[{required:!0,message:"ボードゲームの数を入力してください",trigger:"blur"}],home_url:[{required:!0,message:"URLを入力してください",trigger:"blur"}],price:[{required:!0,message:"予算を入力してください",trigger:"blur"}],content:[{required:!0,message:"紹介文を入力してください",trigger:"blur"}]}}},filters:{toWardName:function(e){}},methods:{onFileChange:function(e){var t=this;if(0===e.target.files.length)return this.reset(),!1;if(!e.target.files[0].type.match("image.*"))return this.reset(),!1;var r=new FileReader;r.onload=function(e){t.preview=e.target.result},r.readAsDataURL(e.target.files[0]),this.register_form.photo=e.target.files[0]},submit:(u=i(o.a.mark((function e(){var t,r,s,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.register_form.wards,this.wards.forEach((function(e){e.name==t&&(r=e.id)})),s=this.register_form?1:0,(a=new FormData).append("photo",this.register_form.photo),a.append("shop_name",this.register_form.name),a.append("address",this.register_form.address),a.append("ward_id",r),a.append("byo_flg",s),a.append("boardgame_num",this.register_form.boardgame_num),a.append("home_url",this.register_form.home_url),a.append("price",this.register_form.price),a.append("content",this.register_form.content),e.next=15,axios.post("/api/shops",a);case 15:if(i=e.sent,console.log(i),i.status!==n.f){e.next=20;break}return this.errors=i.data.errors,e.abrupt("return",!1);case 20:if(i.status===n.a){e.next=23;break}return this.$store.commit("error/setCode",i.status),e.abrupt("return",!1);case 23:this.resetForm("register_form"),alert("submit!");case 25:case"end":return e.stop()}}),e,this)}))),function(){return u.apply(this,arguments)}),submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.submit()}))},resetForm:function(e){this.$refs[e].resetFields(),this.preview="",this.photo=null,this.$el.querySelector('input[type="file"]').value=null},fetchWards:(l=i(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,axios.get("/api/wards/");case 2:if((t=e.sent).status===n.d){e.next=6;break}return this.$store.commit("error/setCode",t.status),e.abrupt("return",!1);case 6:this.wards=t.data;case 7:case"end":return e.stop()}}),e,this)}))),function(){return l.apply(this,arguments)})},created:function(){this.fetchWards()}},c=(r("iMA4"),r("KHd+")),p={data:function(){return{show:!0}},components:{shopForm:Object(c.a)(m,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"columns"},[r("div",{staticClass:"column is-12-mobile is-8-tablet is-offset-2-tablet is-6-desktop is-offset-3-desktop"},[r("h2",{staticClass:"title"},[e._v("Regist shop")]),e._v(" "),e.errors?r("div",{staticClass:"errors"},[e.errors.photo?r("ul",e._l(e.errors.photo,(function(t){return r("li",{key:t},[e._v(e._s(t))])})),0):e._e(),e._v(" "),e.errors.shop_name?r("ul",e._l(e.errors.shop_name,(function(t){return r("li",{key:t},[e._v(e._s(t))])})),0):e._e(),e._v(" "),e.errors.address?r("ul",e._l(e.errors.address,(function(t){return r("li",{key:t},[e._v(e._s(t))])})),0):e._e()]):e._e(),e._v(" "),r("el-form",{ref:"register_form",attrs:{model:e.register_form,rules:e.rules,"label-width":"120px"}},[r("input",{staticClass:"form__item",attrs:{type:"file"},on:{change:e.onFileChange}}),e._v(" "),e.preview?r("output",{staticClass:"form__output"},[r("img",{attrs:{src:e.preview,alt:""}})]):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"店舗名",prop:"name"}},[r("el-input",{model:{value:e.register_form.name,callback:function(t){e.$set(e.register_form,"name",t)},expression:"register_form.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"住所",prop:"address"}},[r("el-input",{model:{value:e.register_form.address,callback:function(t){e.$set(e.register_form,"address",t)},expression:"register_form.address"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"東京23区",prop:"wards"}},[r("el-select",{attrs:{placeholder:"千代田区"},model:{value:e.register_form.wards,callback:function(t){e.$set(e.register_form,"wards",t)},expression:"register_form.wards"}},e._l(e.wards,(function(t){return r("el-option",{key:t.id,attrs:{value:t.name}},[e._v(e._s(t.name))])})),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"BYO",prop:"byo"}},[r("el-tooltip",{attrs:{content:"持ち込み可かどうか選択して下さい",placement:"top",effect:"light"}},[r("span",{staticClass:"icon is-small"},[r("i",{staticClass:"far fa-question-circle"})])]),e._v(" "),r("el-switch",{model:{value:e.register_form.byo,callback:function(t){e.$set(e.register_form,"byo",t)},expression:"register_form.byo"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"ボードゲーム数",prop:"boardgame_num"}},[r("el-input",{model:{value:e.register_form.boardgame_num,callback:function(t){e.$set(e.register_form,"boardgame_num",t)},expression:"register_form.boardgame_num"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"HOME URL",prop:"home_url"}},[r("el-input",{model:{value:e.register_form.home_url,callback:function(t){e.$set(e.register_form,"home_url",t)},expression:"register_form.home_url"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"予算",prop:"price"}},[r("el-input",{model:{value:e.register_form.price,callback:function(t){e.$set(e.register_form,"price",t)},expression:"register_form.price"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"紹介文",prop:"content"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.register_form.content,callback:function(t){e.$set(e.register_form,"content",t)},expression:"register_form.content"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"submit"},on:{click:function(t){return e.submitForm("register_form")}}},[e._v("Submit")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("register_form")}}},[e._v("Reset")])],1)],1)],1)])}),[],!1,null,"20b64673",null).exports},methods:{showForm:function(){this.show=!this.show}}},d=(r("KocH"),Object(c.a)(p,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hero is-fullheight"},[t("div",{staticClass:"hero-body"},[t("div",{staticClass:"container"},[t("h2",{staticClass:"title is-1 is-spaced has-text-centered"},[this._v("あなたのお店もぜひ紹介してください！")]),this._v(" "),t("shopForm")],1)])])}),[],!1,null,"31606b48",null));t.default=d.exports},iMA4:function(e,t,r){"use strict";var s=r("K2nW");r.n(s).a},"mwd/":function(e,t,r){"use strict";var s={name:"bdTextField",components:{bdIcon:r("cv7c").a},props:{type:{type:String,default:"text",validator:function(e){return["text","email","password","search","url"].includes(e)}},placeholder:String,value:String,icon:String},methods:{input:function(e){e.target.value!==this.value&&this.$emit("input",e.target.value)}}},o=r("KHd+"),n=Object(o.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"field"},[r("div",{staticClass:"control",class:{"has-icons-left":e.icon}},[r("input",{staticClass:"input",attrs:{type:e.type,placeholder:e.placeholder,name:e.type},domProps:{value:e.value},on:{input:e.input}}),e._v(" "),e.icon?r("bdIcon",{staticClass:"is-small is-left",attrs:{name:e.icon}}):e._e()],1)])}),[],!1,null,null,null);t.a=n.exports},oM3F:function(e,t,r){var s=r("AQJX");"string"==typeof s&&(s=[[e.i,s,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};r("aET+")(s,o);s.locals&&(e.exports=s.locals)},v7HU:function(e,t,r){(e.exports=r("I1BE")(!1)).push([e.i,"\nh2[data-v-20b64673] {\n  text-align: center;\n}\n.form__item[data-v-20b64673] {\n  padding-top: 0.5em;\n  padding-right: 0.75em;\n  padding-bottom: 0.5em;\n  padding-left: 2em;\n  border: 1px solid transparent;\n}\n.column[data-v-20b64673] {\n  padding: 1em;\n  background: hsla(0, 0%, 92%, 0.8);\n}\n.title[data-v-20b64673] {\n  color: #fff;\n}\n",""])}}]);